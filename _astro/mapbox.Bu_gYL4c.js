const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/mapbox-gl.CmtmZj70.js","_astro/index.BxxlIF7d.js"])))=>i.map(i=>d[i]);
import{_ as $,r as U}from"./AppShell.BSbYjyjB.js";import{r as c}from"./index.BxxlIF7d.js";/* empty css                       */const M=c.createContext(null),ve=t=>{const[e,o]=c.useState({}),r=c.useCallback((i,s="default")=>{o(a=>{if(s==="current")throw new Error("'current' cannot be used as map id");if(a[s])throw new Error(`Multiple maps with the same id: ${s}`);return{...a,[s]:i}})},[]),n=c.useCallback((i="default")=>{o(s=>{if(s[i]){const a={...s};return delete a[i],a}return s})},[]);return c.createElement(M.Provider,{value:{maps:e,onMapMount:r,onMapUnmount:n}},t.children)};function Ee(){const t=c.useContext(M)?.maps,e=c.useContext(C);return c.useMemo(()=>({...t,current:e?.map}),[t,e])}function j(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t._seaLevelZoom??t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding,elevation:t._centerAltitude}}function I(t){return Number.isFinite(t.longitude)||Number.isFinite(t.latitude)||Number.isFinite(t.zoom)||Number.isFinite(t.pitch)||Number.isFinite(t.bearing)}function V(t,e){return!!(Number.isFinite(e.longitude)&&t.center.lng!==e.longitude||Number.isFinite(e.latitude)&&t.center.lat!==e.latitude||Number.isFinite(e.bearing)&&t.bearing!==e.bearing||Number.isFinite(e.pitch)&&t.pitch!==e.pitch||Number.isFinite(e.zoom)&&(t._seaLevelZoom??t.zoom)!==e.zoom||e.padding&&!t.isPaddingEqual(e.padding))}function w(){}function H(t,e){const o=t._constrain,r=t._calcMatrices;if(t._constrain=w,t._calcMatrices=w,Number.isFinite(e.bearing)&&(t.bearing=e.bearing),Number.isFinite(e.pitch)&&(t.pitch=e.pitch),e.padding&&!t.isPaddingEqual(e.padding)&&(t.padding=e.padding),Number.isFinite(e.longitude)||Number.isFinite(e.latitude)){const n=t.center;t._center=new n.constructor(e.longitude??n.lng,e.latitude??n.lat)}if(Number.isFinite(e.zoom))if(t._centerAltitude=e.elevation??0,t.elevation){t._seaLevelZoom=e.zoom;const n=t.pixelsPerMeter/t.worldSize*t._centerAltitude,i=t._mercatorZfromZoom(e.zoom),s=t._mercatorZfromZoom(t._maxZoom),a=Math.max(i-n,s);t._setZoom(t._zoomFromMercatorZ(a))}else t._seaLevelZoom=null,t.zoom=e.zoom;t._constrain=o,t._calcMatrices=r,t._unmodified||(t._constrain(),t._calcMatrices())}const W=new Set(["_calcMatrices","_calcFogMatrices","_updateCameraState","_updateSeaLevelZoom"]);function q(t){let e=!1,o={};const r=t;let n=null;const i={get(s,a){return a==="$reactViewState"?o:a==="$proposedTransform"?n:a==="$internalUpdate"?e:a==="_setZoom"?l=>{e&&n?.[a](l),Number.isFinite(o.zoom)||r[a](l)}:(e&&a==="_translateCameraConstrained"&&I(o)&&(n=n||r.clone()),W.has(a)?function(...l){n?.[a](...l),r[a](...l)}:e&&n?n[a]:r[a])},set(s,a,l){if(a==="$reactViewState")return o=l,H(r,o),!0;if(a==="$proposedTransform")return n=l,!0;if(a==="$internalUpdate")return e=l,!0;let f=l;return a==="center"||a==="_center"?(Number.isFinite(o.longitude)||Number.isFinite(o.latitude))&&(f=new l.constructor(o.longitude??l.lng,o.latitude??l.lat)):a==="zoom"||a==="_zoom"||a==="_seaLevelZoom"?Number.isFinite(o.zoom)&&(f=r[a]):a==="_centerAltitude"?Number.isFinite(o.elevation)&&(f=r[a]):a==="pitch"||a==="_pitch"?Number.isFinite(o.pitch)&&(f=r[a]):(a==="bearing"||a==="rotation"||a==="angle")&&Number.isFinite(o.bearing)&&(f=r[a]),e&&f!==l&&(n=n||r.clone()),e&&n&&(n[a]=l),r[a]=f,!0}};return new Proxy(t,i)}const B=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function R(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const o=t.layers.map(r=>{let n=null;"interactive"in r&&(n=Object.assign({},r),delete n.interactive);const i=e[r.ref];if(i){n=n||Object.assign({},r),delete n.ref;for(const s of B)s in i&&(n[s]=i[s])}return n||r});return{...t,layers:o}}function G(t,e){const o=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,n=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0;return o===n&&r===i}function h(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!h(t[o],e[o]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const o=Object.keys(t),r=Object.keys(e);if(o.length!==r.length)return!1;for(const n of o)if(!e.hasOwnProperty(n)||!h(t[n],e[n]))return!1;return!0}return!1}var F={};const N={version:8,sources:{},layers:[]},z={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},k={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},A={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},K=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Q=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class E{constructor(e,o,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=n=>{const i=this.props[A[n.type]];i?i(n):n.type==="error"&&console.error(n.error)},this._onPointerEvent=n=>{(n.type==="mousemove"||n.type==="mouseout")&&this._updateHover(n);const i=this.props[z[n.type]];i&&(this.props.interactiveLayerIds&&n.type!=="mouseover"&&n.type!=="mouseout"&&(n.features=this._hoveredFeatures||this._queryRenderedFeatures(n.point)),i(n),delete n.features)},this._onCameraEvent=n=>{if(!this._internalUpdate){const i=this.props[k[n.type]],s=this._proxyTransform;i&&(n.viewState=j(s.$proposedTransform??s),i(n)),n.type==="moveend"&&(s.$proposedTransform=null)}n.type in this._deferredEvents&&(this._deferredEvents[n.type]=!1)},this._MapClass=e,this.props=o,this._initialize(r)}get map(){return this._map}get transform(){return this._map.transform}setProps(e){const o=this.props;this.props=e;const r=this._updateSettings(e,o);r&&this._createProxyTransform(this._map);const n=this._updateSize(e),i=this._updateViewState(e,!0);this._updateStyle(e,o),this._updateStyleComponents(e,o),this._updateHandlers(e,o),(r||n||i&&!this._map.isMoving())&&this.redraw()}static reuse(e,o){const r=E.savedMaps.pop();if(!r)return null;const n=r.map,i=n.getContainer();for(o.className=i.className;i.childNodes.length>0;)o.appendChild(i.childNodes[0]);n._container=o,r.setProps({...e,styleDiffing:!1}),n.resize();const{initialViewState:s}=e;return s&&(s.bounds?n.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):r._updateViewState(s,!1)),n.isStyleLoaded()?n.fire("load"):n.once("styledata",()=>n.fire("load")),n._update(),r}_initialize(e){const{props:o}=this,{mapStyle:r=N}=o,n={...o,...o.initialViewState,accessToken:o.mapboxAccessToken||J()||null,container:e,style:R(r)},i=n.initialViewState||n.viewState||n;if(Object.assign(n,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),o.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,o.gl)}const s=new this._MapClass(n);i.padding&&s.setPadding(i.padding),o.cursor&&(s.getCanvas().style.cursor=o.cursor),this._createProxyTransform(s);const a=s._render;s._render=u=>{this._inRender=!0,a.call(s,u),this._inRender=!1};const l=s._renderTaskQueue.run;s._renderTaskQueue.run=u=>{this._proxyTransform.$internalUpdate=!0,l.call(s._renderTaskQueue,u),this._proxyTransform.$internalUpdate=!1,this._fireDefferedEvents()};const f=s.jumpTo;s.jumpTo=(...u)=>(this._proxyTransform.$internalUpdate=!0,f.apply(s,u),this._proxyTransform.$internalUpdate=!1,s);const d=s.fire;s.fire=this._fireEvent.bind(this,d),s.on("styledata",()=>{this._updateStyleComponents(this.props,{})}),s.on("sourcedata",()=>{this._updateStyleComponents(this.props,{})});for(const u in z)s.on(u,this._onPointerEvent);for(const u in k)s.on(u,this._onCameraEvent);for(const u in A)s.on(u,this._onEvent);this._map=s}recycle(){this.map.getContainer().querySelector("[mapboxgl-children]")?.remove(),E.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createProxyTransform(e){const o=q(e.transform);e.transform=o,e.painter.transform=o,this._proxyTransform=o}_updateSize(e){const{viewState:o}=e;if(o){const r=this._map;if(o.width!==r.transform.width||o.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,o){const r=e.viewState||e,n=this._proxyTransform,{zoom:i,pitch:s,bearing:a}=n,l=V(this._proxyTransform,r);if(n.$reactViewState=r,l&&o){const f=this._deferredEvents;f.move=!0,f.zoom||(f.zoom=i!==n.zoom),f.rotate||(f.rotate=a!==n.bearing),f.pitch||(f.pitch=s!==n.pitch)}return l}_updateSettings(e,o){const r=this._map;let n=!1;for(const i of K)i in e&&!h(e[i],o[i])&&(n=!0,r[`set${i[0].toUpperCase()}${i.slice(1)}`]?.call(r,e[i]));return n}_updateStyle(e,o){if(e.cursor!==o.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==o.mapStyle){const{mapStyle:r=N,styleDiffing:n=!0}=e,i={diff:n};return"localIdeographFontFamily"in e&&(i.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(R(r),i),!0}return!1}_updateStyleComponents(e,o){const r=this._map;let n=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!h(e.light,o.light)&&(n=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!h(e.fog,o.fog)&&(n=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!h(e.terrain,o.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(n=!0,r.setTerrain(e.terrain))),n}_updateHandlers(e,o){const r=this._map;let n=!1;for(const i of Q){const s=e[i]??!0,a=o[i]??!0;h(s,a)||(n=!0,s?r[i].enable(s):r[i].disable())}return n}_queryRenderedFeatures(e){const o=this._map,{interactiveLayerIds:r=[]}=this.props;try{return o.queryRenderedFeatures(e,{layers:r.filter(o.getLayer.bind(o))})}catch{return[]}}_updateHover(e){const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const n=e.type,i=this._hoveredFeatures?.length>0,s=this._queryRenderedFeatures(e.point),a=s.length>0;!a&&i&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=s,a&&!i&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=n}else this._hoveredFeatures=null}_fireEvent(e,o,r){const n=this._map,i=this._proxyTransform,s=i.$internalUpdate;try{i.$internalUpdate=!1,e.call(n,o,r)}finally{i.$internalUpdate=s}return n}_fireDefferedEvents(){const e=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&e.fire(o);this._internalUpdate=!1}}E.savedMaps=[];function J(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||F.MapboxAccessToken}catch{}try{t=t||F.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const Y=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function X(t){if(!t)return null;const e=t.map,o={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const n=e.transform;e.transform=t.transform;const i=e.project(r);return e.transform=n,i},unproject:r=>{const n=e.transform;e.transform=t.transform;const i=e.unproject(r);return e.transform=n,i},queryTerrainElevation:(r,n)=>{const i=e.transform;e.transform=t.transform;const s=e.queryTerrainElevation(r,n);return e.transform=i,s},queryRenderedFeatures:(r,n)=>{const i=e.transform;e.transform=t.transform;const s=e.queryRenderedFeatures(r,n);return e.transform=i,s}};for(const r of ee(e))!(r in o)&&!Y.includes(r)&&(o[r]=e[r].bind(e));return o}function ee(t){const e=new Set;let o=t;for(;o;){for(const r of Object.getOwnPropertyNames(o))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);o=Object.getPrototypeOf(o)}return Array.from(e)}const te=typeof document<"u"?c.useLayoutEffect:c.useEffect,ne=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function oe(t,e){for(const r of ne)r in e&&(t[r]=e[r]);const{RTLTextPlugin:o="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;o&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(o,r=>{r&&console.error(r)},!0)}const C=c.createContext(null);function re(t,e){const o=c.useContext(M),[r,n]=c.useState(null),i=c.useRef(),{current:s}=c.useRef({mapLib:null,map:null});c.useEffect(()=>{const f=t.mapLib;let d=!0,u;return Promise.resolve(f||$(()=>import("./mapbox-gl.CmtmZj70.js").then(m=>m.m),__vite__mapDeps([0,1]))).then(m=>{if(!d)return;if(!m)throw new Error("Invalid mapLib");const g="Map"in m?m:m.default;if(!g.Map)throw new Error("Invalid mapLib");oe(g,t),t.reuseMaps&&(u=E.reuse(t,i.current)),u||(u=new E(g.Map,t,i.current)),s.map=X(u),s.mapLib=g,n(u),o?.onMapMount(s.map,t.id)}).catch(m=>{const{onError:g}=t;g?g({type:"error",target:null,error:m}):console.error(m)}),()=>{d=!1,u&&(o?.onMapUnmount(t.id),t.reuseMaps?u.recycle():u.destroy())}},[]),te(()=>{r&&r.setProps(t)}),c.useImperativeHandle(e,()=>s.map,[r]);const a=c.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),l={height:"100%"};return c.createElement("div",{id:t.id,ref:i,style:a},r&&c.createElement(C.Provider,{value:s},c.createElement("div",{"mapboxgl-children":"",style:l},t.children)))}const Se=c.forwardRef(re),ie=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function v(t,e){if(!t||!e)return;const o=t.style;for(const r in e){const n=e[r];Number.isFinite(n)&&!ie.test(r)?o[r]=`${n}px`:o[r]=n}}function Z(t,e){if(t===e)return null;const o=P(t),r=P(e),n=[];for(const i of r)o.has(i)||n.push(i);for(const i of o)r.has(i)||n.push(i);return n.length===0?null:n}function P(t){return new Set(t?t.trim().split(/\s+/):[])}const be=c.memo(c.forwardRef((t,e)=>{const{map:o,mapLib:r}=c.useContext(C),n=c.useRef({props:t}),i=c.useMemo(()=>{let b=!1;c.Children.forEach(t.children,y=>{y&&(b=!0)});const D={...t,element:b?document.createElement("div"):null},p=new r.Marker(D);return p.setLngLat([t.longitude,t.latitude]),p.getElement().addEventListener("click",y=>{n.current.props.onClick?.({type:"click",target:p,originalEvent:y})}),p.on("dragstart",y=>{const _=y;_.lngLat=i.getLngLat(),n.current.props.onDragStart?.(_)}),p.on("drag",y=>{const _=y;_.lngLat=i.getLngLat(),n.current.props.onDrag?.(_)}),p.on("dragend",y=>{const _=y;_.lngLat=i.getLngLat(),n.current.props.onDragEnd?.(_)}),p},[]);c.useEffect(()=>(i.addTo(o.getMap()),()=>{i.remove()}),[]);const{longitude:s,latitude:a,offset:l,style:f,draggable:d=!1,popup:u=null,rotation:m=0,rotationAlignment:g="auto",pitchAlignment:x="auto"}=t;c.useEffect(()=>{v(i.getElement(),f)},[f]),c.useImperativeHandle(e,()=>i,[]);const O=n.current.props;(i.getLngLat().lng!==s||i.getLngLat().lat!==a)&&i.setLngLat([s,a]),l&&!G(i.getOffset(),l)&&i.setOffset(l),i.isDraggable()!==d&&i.setDraggable(d),i.getRotation()!==m&&i.setRotation(m),i.getRotationAlignment()!==g&&i.setRotationAlignment(g),i.getPitchAlignment()!==x&&i.setPitchAlignment(x),i.getPopup()!==u&&i.setPopup(u);const T=Z(O.className,t.className);if(T)for(const b of T)i.toggleClassName(b);return n.current.props=t,U.createPortal(t.children,i.getElement())})),Le=c.memo(c.forwardRef((t,e)=>{const{map:o,mapLib:r}=c.useContext(C),n=c.useMemo(()=>document.createElement("div"),[]),i=c.useRef({props:t}),s=c.useMemo(()=>{const a={...t},l=new r.Popup(a);return l.setLngLat([t.longitude,t.latitude]),l.once("open",f=>{i.current.props.onOpen?.(f)}),l},[]);if(c.useEffect(()=>{const a=l=>{i.current.props.onClose?.(l)};return s.on("close",a),s.setDOMContent(n).addTo(o.getMap()),()=>{s.off("close",a),s.isOpen()&&s.remove()}},[]),c.useEffect(()=>{v(s.getElement(),t.style)},[t.style]),c.useImperativeHandle(e,()=>s,[]),s.isOpen()){const a=i.current.props;(s.getLngLat().lng!==t.longitude||s.getLngLat().lat!==t.latitude)&&s.setLngLat([t.longitude,t.latitude]),t.offset&&!h(a.offset,t.offset)&&(s.options.anchor=t.anchor,s.setOffset(t.offset)),(a.anchor!==t.anchor||a.maxWidth!==t.maxWidth)&&s.setMaxWidth(t.maxWidth);const l=Z(a.className,t.className);if(l)for(const f of l)s.toggleClassName(f);i.current.props=t}return U.createPortal(t.children,n)}));function S(t,e,o,r){const n=c.useContext(C),i=c.useMemo(()=>t(n),[]);return c.useEffect(()=>{const s=r||o||e,a=typeof e=="function"&&typeof o=="function"?e:null,l=typeof o=="function"?o:typeof e=="function"?e:null,{map:f}=n;return f.hasControl(i)||(f.addControl(i,s?.position),a&&a(n)),()=>{l&&l(n),f.hasControl(i)&&f.removeControl(i)}},[]),i}function se(t){const e=S(({mapLib:o})=>new o.AttributionControl(t),{position:t.position});return c.useEffect(()=>{v(e._container,t.style)},[t.style]),null}const Me=c.memo(se);function ae(t){const e=S(({mapLib:o})=>new o.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return c.useEffect(()=>{v(e._controlContainer,t.style)},[t.style]),null}const xe=c.memo(ae);function ce(t,e){const o=c.useRef({props:t}),r=S(({mapLib:n})=>{const i=new n.GeolocateControl(t),s=i._setupUI.bind(i);return i._setupUI=a=>{i._container.hasChildNodes()||s(a)},i.on("geolocate",a=>{o.current.props.onGeolocate?.(a)}),i.on("error",a=>{o.current.props.onError?.(a)}),i.on("outofmaxbounds",a=>{o.current.props.onOutOfMaxBounds?.(a)}),i.on("trackuserlocationstart",a=>{o.current.props.onTrackUserLocationStart?.(a)}),i.on("trackuserlocationend",a=>{o.current.props.onTrackUserLocationEnd?.(a)}),i},{position:t.position});return o.current.props=t,c.useImperativeHandle(e,()=>r,[]),c.useEffect(()=>{v(r._container,t.style)},[t.style]),null}const Te=c.memo(c.forwardRef(ce));function le(t){const e=S(({mapLib:o})=>new o.NavigationControl(t),{position:t.position});return c.useEffect(()=>{v(e._container,t.style)},[t.style]),null}const we=c.memo(le);function ue(t){const e=S(({mapLib:i})=>new i.ScaleControl(t),{position:t.position}),o=c.useRef(t),r=o.current;o.current=t;const{style:n}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),c.useEffect(()=>{v(e._container,n)},[n]),null}const Re=c.memo(ue);function L(t,e){if(!t)throw new Error(e)}let fe=0;function de(t,e,o){if(t.style&&t.style._loaded){const r={...o};return delete r.id,delete r.children,t.addSource(e,r),t.getSource(e)}return null}function me(t,e,o){L(e.id===o.id,"source id changed"),L(e.type===o.type,"source type changed");let r="",n=0;for(const s in e)s!=="children"&&s!=="id"&&!h(o[s],e[s])&&(r=s,n++);if(!n)return;const i=e.type;i==="geojson"?t.setData(e.data):i==="image"?t.updateImage({url:e.url,coordinates:e.coordinates}):"setCoordinates"in t&&n===1&&r==="coordinates"?t.setCoordinates(e.coordinates):"setUrl"in t&&r==="url"?t.setUrl(e.url):"setTiles"in t&&r==="tiles"?t.setTiles(e.tiles):console.warn(`Unable to update <Source> prop: ${r}`)}function Fe(t){const e=c.useContext(C).map.getMap(),o=c.useRef(t),[,r]=c.useState(0),n=c.useMemo(()=>t.id||`jsx-source-${fe++}`,[]);c.useEffect(()=>{if(e){const s=()=>setTimeout(()=>r(a=>a+1),0);return e.on("styledata",s),s(),()=>{if(e.off("styledata",s),e.style&&e.style._loaded&&e.getSource(n)){const a=e.getStyle()?.layers;if(a)for(const l of a)l.source===n&&e.removeLayer(l.id);e.removeSource(n)}}}},[e]);let i=e&&e.style&&e.getSource(n);return i?me(i,t,o.current):i=de(e,n,t),o.current=t,i&&c.Children.map(t.children,s=>s&&c.cloneElement(s,{source:n}))||null}function he(t,e,o,r){if(L(o.id===r.id,"layer id changed"),L(o.type===r.type,"layer type changed"),o.type==="custom"||r.type==="custom")return;const{layout:n={},paint:i={},filter:s,minzoom:a,maxzoom:l,beforeId:f}=o;if(f!==r.beforeId&&t.moveLayer(e,f),n!==r.layout){const d=r.layout||{};for(const u in n)h(n[u],d[u])||t.setLayoutProperty(e,u,n[u]);for(const u in d)n.hasOwnProperty(u)||t.setLayoutProperty(e,u,void 0)}if(i!==r.paint){const d=r.paint||{};for(const u in i)h(i[u],d[u])||t.setPaintProperty(e,u,i[u]);for(const u in d)i.hasOwnProperty(u)||t.setPaintProperty(e,u,void 0)}h(s,r.filter)||t.setFilter(e,s),(a!==r.minzoom||l!==r.maxzoom)&&t.setLayerZoomRange(e,a,l)}function ge(t,e,o){if(t.style&&t.style._loaded&&(!("source"in o)||t.getSource(o.source))){const r={...o,id:e};delete r.beforeId,t.addLayer(r,o.beforeId)}}let ye=0;function Ne(t){const e=c.useContext(C).map.getMap(),o=c.useRef(t),[,r]=c.useState(0),n=c.useMemo(()=>t.id||`jsx-layer-${ye++}`,[]);if(c.useEffect(()=>{if(e){const s=()=>r(a=>a+1);return e.on("styledata",s),s(),()=>{e.off("styledata",s),e.style&&e.style._loaded&&e.getLayer(n)&&e.removeLayer(n)}}},[e]),e&&e.style&&e.getLayer(n))try{he(e,n,t,o.current)}catch(s){console.warn(s)}else ge(e,n,t);return o.current=t,null}export{Me as AttributionControl,xe as FullscreenControl,Te as GeolocateControl,Ne as Layer,Se as Map,ve as MapProvider,be as Marker,we as NavigationControl,Le as Popup,Re as ScaleControl,Fe as Source,Se as default,S as useControl,Ee as useMap};
